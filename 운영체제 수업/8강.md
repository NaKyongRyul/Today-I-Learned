# 2022-03-31

## 프로세스

프로세스는 어떤 작업의 절차이고 하드디스크에 있는 프로그램이 실제로 동작을 하는 것이다.<br/>
프로세스간의 통신은 공유 메모리를 통해 이루어지거나 메세지를 전달함으로서 이루어진다.

<br/>

## 프로세스 vs 프로세서

프로세스는 운영체제에서 동작하는 프로그램으로 실행하고 있는 프로그램이다.<br/>
프로세서는 CPU이자 소프트웨어적인 측면에서 작업을 수행하는 가상의 기기이다.

<br/>

## 컴퓨터 내부적으로 운영체제가 하는 일

<img width="260" alt="스크린샷 2022-04-01 오전 10 52 35" src="https://user-images.githubusercontent.com/67616146/161179253-1aee1107-04c1-4413-9d44-ddb5538a17cd.png">

<br/>
<br/>

사용자가 더블클릭했을 때, 그 프로그램을 메모리에서 실행시켜야하는데 그 코드를 메모리에 올리는 것이 아니라 위와 같은 형태로 만든다.
그리고 이 프로그램의 텍스트는 text section에, 전역변수는 data section에 넣는다. 프로그램이 실행됨에 따라서 heap 영역에 할당되고 stack 영역은 함수가 호출될 때마다 자란다(그림상 아래로). 해당 함수가 다른 함수를 호출했을 때 제어권이 다른 함수로 넘어갔을 떄 현재까지 사용한 지역변수를 저장한다.

<br/>

## 프로세스 상태

<img width="496" alt="스크린샷 2022-04-01 오전 10 58 32" src="https://user-images.githubusercontent.com/67616146/161179756-835ff830-48e8-4a3c-811f-e5a016c54d66.png">

<br/>
<br/>

- new : 프로세스가 생성중이다.
- running : 명령어들이 실행되고 있다.
- waiting : 프로세스가 어떤 이벤트(입출력 완료)를 기다린다. 이는 실행할 준비가 된 상태이다.
- ready : 프로세스가 처리기에 할당되기를 기다린다.
- terminated : 프로세스의 실행이 종료되었다.

<br/>

## PCB (Process Control Block)

<img width="177" alt="스크린샷 2022-04-01 오후 8 23 46" src="https://user-images.githubusercontent.com/67616146/161254234-267909aa-acf7-4df8-b31c-e79e40ad953a.png">

<br/>
<br/>

프로세스 상태 정보(위의 5가지 상태)는 PCB에 저장한다.
PCB는 RAM에 저장된다. 하드디스크에 저장하면 읽고 쓰는 동안 CPU는 놀아야 하기 때문에 빠른 RAM에 저장하는 것이다.

<br/>

## CPU 스위치

프로세스는 어떤 프로세스에서 다른 프로세스로 전환이 필요하다. 왜냐하면 하나의 컴퓨터에서는 여러 개의 실행되는 프로그램이 존재하기 때문이다.

text는 컴푸터가 CPU를 통해서 실행하는 것이고 data는 실행하는 동안 필요한 데이터이다.

프로그램의 text 영역은 CPU애서 실행하는 명령어들을 text section에서 저장하고있다.

<br/>

## context switching(문맥교환)

태초의 CPU는 한번에 하나의 프로그램만 실행할 수 있었다. 그런데 실행해야할 프로그램은 여러개다. 그래서 프로그램을 조금씩 조금씩 사용하는 시분할 시스템을 사용하고 있다. <br/><br/>

<img width="476" alt="스크린샷 2022-04-01 오후 8 47 36" src="https://user-images.githubusercontent.com/67616146/161257520-ddc0ac61-087c-4a06-b6f3-47e91db19042.png">

<br/>
<br/>

시간이 되면 프로세스1만 계속 실행할 수 없으므로 책갈피를 꽃아놓고 책장에 넣고 책장의 프로세스2를 꺼내서 실행한다. 프로세스2가 끝나면 다시 책갈피를 꽃아놓고 책장에 넣고 책장에 있는 프로세스1을 꺼내서 실행한다.

<br/>

## PCB에 저장된 내용들은 어디에 작성되어 있을까?

리눅스 디렉토리 밑에 스케쥴.h 파일에 task_struct에 저장되어 있다.

<br/>

## Process Scheduling

PCB는 리스트로 구성되어있는데 이것을 저장하고 있는 것은 큐이다. 프로세스를 관리하기 위한 큐가 여러 개 있다. 여기에 PCB를 넣었다 뺐다 한다. <br/>

- job queue - 현재 시스템에서 실핼되고 있는 모든 프로세스의 정보를 담고있음
- ready queue - 레디 상태의 프로세스를 저장하고있음
- device queues - I/O device의 사용을 기다리고있음

device queues가 복수인 이유는 컴퓨터의 디바이스마다 큐가 있기 때문이다.

<br/>

## 그외 상식

시분할 시스템 - 시간을 분할해서 여러 작업들을 그 시간 안에 수행하는 것이다.
